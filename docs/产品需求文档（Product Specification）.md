# 产品需求文档（Product Specification）

#  

## 1 项目概述

​	本项目旨在开发一款基于低功耗 MCU 的关键词识别设备，具备本地推理能力、低延迟响应以及离线运行特性，适用于便携语音交互、儿童玩具、工业控制等场景。

## 2 功能需求

### 2.1 使用场景和使用需求

（1）用户无需联网即可通过语音控制设备

（2）在安静或轻噪声环境下，能够准确识别指定语音命令

（3）对设备反应时间有较高要求，需在 200ms 内完成响应

### 2.2 核心功能

（1）识别指定的语音关键词（如：“yes”, “no”, “up”, “down”, “left”, “right”, “on”, “off”）

（2）在听到关键词后触发指定动作或状态变化

（3）本地推理，无需网络连接

### 2.3 性能指标

延迟要求：从语音结束到结果输出，**小于 200ms**

准确率要求：在安静环境下测试，**准确率 ≥ 90%**

### 2.4 运行环境

离线运行，无需依赖云端 API

## 3 平台资源推导与硬件选择

### 3.1 性能需求反推 MCU 要求

（1）**中间张量内存需求**：

​		1）第一层卷积输出 shape = 38×99×16，约 60KB

​		2）第二层卷积输出 shape = 17×47×32，约 100KB

​		3）输入张量 + 输出张量 + 缓冲空间，预估额外 40KB

RAM 合计需求约为 200KB

（2）**Flash 占用预算**：

​		1）模型参数量：约 15K，int8 存储后约 15KB

​		2）TFLite Micro runtime + 推理代码：约 300KB

​		3）应用逻辑与初始化代码：约 100KB

Flash 合计需求约为 400~450KB

（3）**主频要求**：

推理延迟 ≤ 200ms，主频不低于 100MHz

| 项目           | 需求估算  | 推导依据                                   |
| -------------- | --------- | ------------------------------------------ |
| **主频**       | ≥ 100 MHz | 推理延迟控制在 200ms 内                    |
| **RAM 容量**   | ≥ 256 KB  | 中间张量 160KB + 输入/输出缓冲等约 40KB    |
| **Flash 容量** | ≥ 512 KB  | 模型参数 15KB + runtime 300KB + 代码 100KB |

### 3.2 目标硬件平台

基于上述资源需求，选用以下平台作为目标：

| 项目     | 参数              |
| -------- | ----------------- |
| 芯片型号 | STM32F746ZGT6     |
| Flash    | 1 MB              |
| RAM      | 320 KB            |
| MCU 类型 | Cortex-M7 @216MHz |

## 4 数据输入特征

语音采样率：16kHz

每段音频长度：1 秒

特征提取方式：Log-Mel Spectrogram

特征维度：40 Mel bins × 101 帧 → 输入 shape = (40, 101, 1)

## 5 开发及部署目标

模型训练平台：PC 端（TensorFlow）

部署形式：TFLite 模型 + C 语言推理引擎（TFLM）

MCU 端部署方式：使用 CMSIS-DSP + CMSIS-NN + TFLM runtime